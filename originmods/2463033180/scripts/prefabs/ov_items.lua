local assets = { Asset("\065\078\073\077", "\097\110\105\109\047\111\118\095\105\116\101\109\115\046\122\105\112"), Asset("\065\078\073\077", "\097\110\105\109\047\111\118\095\102\108\121\115\104\097\100\111\119\046\122\105\112"), Asset("\065\084\076\065\083", "\105\109\097\103\101\115\047\105\110\118\101\110\116\111\114\121\105\109\097\103\101\115\047\111\118\095\105\116\101\109\115\046\120\109\108"), } local function fn() local inst = CreateEntity() inst["\101\110\116\105\116\121"]:AddTransform() inst["\101\110\116\105\116\121"]:AddAnimState() inst["\101\110\116\105\116\121"]:AddNetwork() inst["\065\110\105\109\083\116\097\116\101"]:SetBank("\111\118\095\098\097\110\100\097\103\101") inst["\065\110\105\109\083\116\097\116\101"]:SetBuild("\111\118\095\105\116\101\109\115") inst["\065\110\105\109\083\116\097\116\101"]:PlayAnimation("\111\118\095\098\097\110\100\097\103\101") MakeInventoryPhysics(inst) inst["\101\110\116\105\116\121"]:SetPristine() if not TheWorld["\105\115\109\097\115\116\101\114\115\105\109"] then return inst end inst:AddComponent("\105\110\115\112\101\099\116\097\098\108\101") inst:AddComponent("\115\116\097\099\107\097\098\108\101") inst:AddComponent("\105\110\118\101\110\116\111\114\121\105\116\101\109") inst["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121\105\116\101\109"]["\097\116\108\097\115\110\097\109\101"] = "\105\109\097\103\101\115\047\105\110\118\101\110\116\111\114\121\105\109\097\103\101\115\047\111\118\095\105\116\101\109\115\046\120\109\108" inst:AddComponent("\104\101\097\108\101\114") inst["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\101\114"]["\111\110\104\101\097\108\102\110"] = function(inst, target) target["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]:DoDelta(0x19) end inst["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\101\114"]:SetHealthAmount(0x1E) return inst end local function makeplume(id) local name = string["\102\111\114\109\097\116"]("\111\118\095\112\108\117\109\101\037\048\049\100", id) local function fn() local inst = CreateEntity() inst["\101\110\116\105\116\121"]:AddTransform() inst["\101\110\116\105\116\121"]:AddAnimState() inst["\101\110\116\105\116\121"]:AddNetwork() inst["\065\110\105\109\083\116\097\116\101"]:SetBank("\111\118\095\112\108\117\109\101\115") inst["\065\110\105\109\083\116\097\116\101"]:SetBuild("\111\118\095\105\116\101\109\115") inst["\065\110\105\109\083\116\097\116\101"]:PlayAnimation(name) MakeInventoryPhysics(inst) inst["\101\110\116\105\116\121"]:SetPristine() if not TheWorld["\105\115\109\097\115\116\101\114\115\105\109"] then return inst end if id == 0x1 then inst:AddComponent("\116\114\097\100\097\098\108\101") elseif id == 0x6 then inst:AddComponent("\101\100\105\098\108\101") inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]["\104\101\097\108\116\104\118\097\108\117\101"] = 0x0 inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]["\104\117\110\103\101\114\118\097\108\117\101"] = 0x0 inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]["\115\097\110\105\116\121\118\097\108\117\101"] = 0x14 inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]:SetOnEatenFn(function(inst, eater) if eater:HasTag("\111\108\105\118\105\097") then eater["\099\111\109\112\111\110\101\110\116\115"]["\111\118\095\108\101\097\118\101"]:LeaveUp() end end) end inst:AddComponent("\105\110\115\112\101\099\116\097\098\108\101") inst:AddComponent("\115\116\097\099\107\097\098\108\101") inst:AddComponent("\105\110\118\101\110\116\111\114\121\105\116\101\109") inst["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121\105\116\101\109"]["\097\116\108\097\115\110\097\109\101"] = "\105\109\097\103\101\115\047\105\110\118\101\110\116\111\114\121\105\109\097\103\101\115\047\111\118\095\105\116\101\109\115\046\120\109\108" return inst end return Prefab(name, fn) end local replyli = { {0xA,30,0}, {0x0,40,0,0x1C20}, {0x0,10,0}, {0x14,20,20,7200}, {0x0,0,0x0} } local eatfn = { [3] = function(inst, eater) if eater:HasTag("\111\108\105\118\105\097") then eater["\099\111\109\112\111\110\101\110\116\115"]["\111\118\095\109\097\110\097"]:DoDelta(0x19) end end, [5] = function(inst, eater) if eater:HasTag("\111\108\105\118\105\097") then eater["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]:DoDelta(-0x50) eater:DoTaskInTime(0.1, function() eater["\110\101\116\095\102\108\121"]:set(true) if not eater["\102\108\121\105\110\103"] then eater["\102\108\121\105\110\103"] = eater:DoPeriodicTask(0x1, function() local num = eater["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]["\099\117\114\114\101\110\116"] if num < 0x32 then eater["\110\101\116\095\102\108\121"]:set(false) eater["\102\108\121\105\110\103"]:Cancel() eater["\102\108\121\105\110\103"] = nil end end) end end) end end, } local function makefood(id) local name = string["\102\111\114\109\097\116"]("\111\118\095\102\111\111\100\037\048\049\100", id) local function fn() local inst = CreateEntity() inst["\101\110\116\105\116\121"]:AddTransform() inst["\101\110\116\105\116\121"]:AddAnimState() inst["\101\110\116\105\116\121"]:AddNetwork() inst["\065\110\105\109\083\116\097\116\101"]:SetBank("\111\118\095\102\111\111\100\115") inst["\065\110\105\109\083\116\097\116\101"]:SetBuild("\111\118\095\105\116\101\109\115") inst["\065\110\105\109\083\116\097\116\101"]:PlayAnimation(name) MakeInventoryPhysics(inst) inst["\101\110\116\105\116\121"]:SetPristine() if not TheWorld["\105\115\109\097\115\116\101\114\115\105\109"] then return inst end inst:AddComponent("\101\100\105\098\108\101") inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]["\104\101\097\108\116\104\118\097\108\117\101"] = replyli[id][1] inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]["\104\117\110\103\101\114\118\097\108\117\101"] = replyli[id][2] inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]["\115\097\110\105\116\121\118\097\108\117\101"] = replyli[id][3] inst["\099\111\109\112\111\110\101\110\116\115"]["\101\100\105\098\108\101"]:SetOnEatenFn(eatfn[id]) local time = replyli[id][4] if time then inst:AddComponent("\112\101\114\105\115\104\097\098\108\101") inst["\099\111\109\112\111\110\101\110\116\115"]["\112\101\114\105\115\104\097\098\108\101"]:SetPerishTime(time) inst["\099\111\109\112\111\110\101\110\116\115"]["\112\101\114\105\115\104\097\098\108\101"]:StartPerishing() inst["\099\111\109\112\111\110\101\110\116\115"]["\112\101\114\105\115\104\097\098\108\101"]["\111\110\112\101\114\105\115\104\114\101\112\108\097\099\101\109\101\110\116"] = "\115\112\111\105\108\101\100\095\102\111\111\100" end inst:AddComponent("\105\110\115\112\101\099\116\097\098\108\101") inst:AddComponent("\115\116\097\099\107\097\098\108\101") inst:AddComponent("\105\110\118\101\110\116\111\114\121\105\116\101\109") inst["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121\105\116\101\109"]["\097\116\108\097\115\110\097\109\101"] = "\105\109\097\103\101\115\047\105\110\118\101\110\116\111\114\121\105\109\097\103\101\115\047\111\118\095\105\116\101\109\115\046\120\109\108" return inst end return Prefab(name, fn) end local function flyshadowfn() local inst = CreateEntity() inst["\101\110\116\105\116\121"]:AddTransform() inst["\101\110\116\105\116\121"]:AddAnimState() inst["\101\110\116\105\116\121"]:AddNetwork() inst["\065\110\105\109\083\116\097\116\101"]:SetBank("\111\118\095\102\108\121\115\104\097\100\111\119") inst["\065\110\105\109\083\116\097\116\101"]:SetBuild("\111\118\095\102\108\121\115\104\097\100\111\119") inst["\065\110\105\109\083\116\097\116\101"]:PlayAnimation("\105\100\108\101") inst["\065\110\105\109\083\116\097\116\101"]:SetOrientation(ANIM_ORIENTATION["\079\110\071\114\111\117\110\100"]) inst["\101\110\116\105\116\121"]:SetPristine() if not TheWorld["\105\115\109\097\115\116\101\114\115\105\109"] then return inst end return inst end local t = {} table["\105\110\115\101\114\116"](t, Prefab("\111\118\095\098\097\110\100\097\103\101", fn, assets)) for i=0x1,6 do table["\105\110\115\101\114\116"](t, makeplume(i)) end for i=0x1,5 do table["\105\110\115\101\114\116"](t, makefood(i)) end table["\105\110\115\101\114\116"](t, Prefab("\111\118\095\102\108\121\115\104\097\100\111\119", flyshadowfn)) return unpack(t)
