local MakePlayerCharacter = require "\112\114\101\102\097\098\115\047\112\108\097\121\101\114\095\099\111\109\109\111\110" local assets = { Asset("\083\067\082\073\080\084", "\115\099\114\105\112\116\115\047\112\114\101\102\097\098\115\047\112\108\097\121\101\114\095\099\111\109\109\111\110\046\108\117\097"), } local prefabs = {} local start_inv = { "\111\118\095\119\101\097\112\111\110\049" } local function onbecamehuman(owner) owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetExternalSpeedMultiplier(owner, "\111\108\105\118\105\097\095\115\112\101\101\100\095\109\111\100", 1.5) end local function onbecameghost(owner) owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:RemoveExternalSpeedMultiplier(owner, "\111\108\105\118\105\097\095\115\112\101\101\100\095\109\111\100") end local function onload(owner, data) owner:ListenForEvent("\109\115\095\114\101\115\112\097\119\110\101\100\102\114\111\109\103\104\111\115\116", onbecamehuman) owner:ListenForEvent("\109\115\095\098\101\099\097\109\101\103\104\111\115\116", onbecameghost) if owner:HasTag("\112\108\097\121\101\114\103\104\111\115\116") then onbecameghost(owner) else onbecamehuman(owner) end if data then if data["\104\101\097\108\116\104"] and data["\104\101\097\108\116\104"]["\104\101\097\108\116\104"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]["\099\117\114\114\101\110\116\104\101\097\108\116\104"] = data["\104\101\097\108\116\104"]["\104\101\097\108\116\104"] end if data["\104\117\110\103\101\114"] and data["\104\117\110\103\101\114"]["\104\117\110\103\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]["\099\117\114\114\101\110\116"] = data["\104\117\110\103\101\114"]["\104\117\110\103\101\114"] end if data["\115\097\110\105\116\121"] and data["\115\097\110\105\116\121"]["\099\117\114\114\101\110\116"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]["\099\117\114\114\101\110\116"] = data["\115\097\110\105\116\121"]["\099\117\114\114\101\110\116"] end owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]:DoDelta(0x0) owner["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]:DoDelta(0x0) owner["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]:DoDelta(0x0) end end local common_postinit = function(owner) owner["\077\105\110\105\077\097\112\069\110\116\105\116\121"]:SetIcon("\111\108\105\118\105\097\046\116\101\120") owner:AddTag("\111\108\105\118\105\097") owner:AddTag("\110\111\116\097\114\103\101\116") owner["\110\101\116\095\109\097\110\097"] = net_byte(owner["\071\085\073\068"],"\079\118\077\097\110\097","\079\118\077\097\110\097") owner["\110\101\116\095\109\097\120\109\097\110\097"] = net_byte(owner["\071\085\073\068"],"\077\097\120\079\118\077\097\110\097","\077\097\120\079\118\077\097\110\097") owner["\110\101\116\095\102\108\121"] = net_bool(owner["\071\085\073\068"],"\079\118\070\108\121","\079\118\070\108\121") end local master_postinit = function(owner) owner["\115\111\117\110\100\115\110\097\109\101"] = "\119\105\108\108\111\119" owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]:SetMaxHealth(0x96) owner["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]:SetMax(0x12C) owner["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]:SetMax(0x96) owner["\068\121\110\097\109\105\099\083\104\097\100\111\119"]:SetSize(1.2, 0.6) owner["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]["\110\105\103\104\116\095\100\114\097\105\110\095\109\117\108\116"] = 0x0 owner["\099\111\109\112\111\110\101\110\116\115"]["\099\111\109\098\097\116"]["\100\097\109\097\103\101\109\117\108\116\105\112\108\105\101\114"] = 0.8 owner["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]["\104\117\110\103\101\114\114\097\116\101"] = 0.8 * TUNING["\087\073\076\083\079\078\095\072\085\078\071\069\082\095\082\065\084\069"] owner["\099\111\109\112\111\110\101\110\116\115"]["\101\097\116\101\114"]:SetDiet({ FOODGROUP["\086\069\071\069\084\065\082\073\065\078"] }, { FOODGROUP["\086\069\071\069\084\065\082\073\065\078"] }) local oldSetVal = owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]["\083\101\116\086\097\108"] owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]["\083\101\116\086\097\108"] = function(self, val, cause, afflicter) local helmet = owner["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121"]:GetEquippedItem(EQUIPSLOTS["\072\069\065\068"]) if val <= 0x0 and helmet and helmet:HasTag("\111\118\095\104\101\108\109\101\116") then owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]:DoDelta(0x50) owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]["\105\110\118\105\110\099\105\098\108\101"] = true if owner["\115\104\105\101\108\100"] then owner["\115\104\105\101\108\100"]:kill_fx() end owner["\115\104\105\101\108\100"] = SpawnPrefab("\102\111\114\099\101\102\105\101\108\100\102\120") owner["\115\104\105\101\108\100"]["\084\114\097\110\115\102\111\114\109"]:SetScale(0.7,0.7,0.7) owner["\115\104\105\101\108\100"]["\101\110\116\105\116\121"]:SetParent(owner["\101\110\116\105\116\121"]) owner:DoTaskInTime(0x5, function() owner["\115\104\105\101\108\100"]:kill_fx() owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]["\105\110\118\105\110\099\105\098\108\101"] = false end) val = 0x50 end return oldSetVal(self, val, cause, afflicter) end owner:AddComponent("\111\118\095\109\097\110\097") owner:AddComponent("\111\118\095\108\101\097\118\101") owner:AddComponent("\115\097\110\105\116\121\097\117\114\097") owner["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121\097\117\114\097"]["\097\117\114\097"] = 0.3 owner["\099\111\109\112\111\110\101\110\116\115"]["\101\097\116\101\114"]:SetOnEatFn(function(owner, food) if food["\112\114\101\102\097\098"] == "\115\101\101\100\115" then owner["\099\111\109\112\111\110\101\110\116\115"]["\111\118\095\109\097\110\097"]:DoDelta(0x5) end end) owner:DoTaskInTime(0x0, function() owner:WatchWorldState("\099\121\099\108\101\115", function(owner, cycles) owner["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121"]:GiveItem(SpawnPrefab("\111\118\095\112\108\117\109\101\049")) end) owner:ListenForEvent("\107\105\108\108\101\100", function(owner, data) if data["\118\105\099\116\105\109"]:HasTag("\098\105\114\100") then owner["\099\111\109\112\111\110\101\110\116\115"]["\115\097\110\105\116\121"]:DoDelta(-0x14) end end) owner:ListenForEvent("\111\110\104\105\116\111\116\104\101\114",function(owner, data) if owner["\110\111\112\101\097\099\101"] == nil then owner:RemoveTag("\110\111\116\097\114\103\101\116") owner["\110\111\112\101\097\099\101"] = true owner:DoTaskInTime(0xF, function() owner:AddTag("\110\111\116\097\114\103\101\116") owner["\110\111\112\101\097\099\101"] = nil end) end if owner["\110\101\116\095\102\108\121"]:value() then owner["\098\097\116\116\108\101"] = true owner["\110\101\116\095\102\108\121"]:set(false) end end) local function Empty()end local function FlyActionFilter(inst, action) return action == ACTIONS["\085\078\075\078\079\087"] end owner:ListenForEvent("\079\118\070\108\121", function(owner, data) local num = owner["\110\101\116\095\102\108\121"]:value() if num then owner["\098\097\116\116\108\101"] = nil owner:AddTag("\110\111\116\097\114\103\101\116") owner["\111\118\095\102\108\121\104\112\117\112"] = owner:DoPeriodicTask(0x1, function() if owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]["\099\117\114\114\101\110\116\104\101\097\108\116\104"] < 0x50 then owner["\099\111\109\112\111\110\101\110\116\115"]["\104\101\097\108\116\104"]:DoDelta(0x1) end end) RemovePhysicsColliders(owner) owner["\102\108\121\102\120"] = SpawnPrefab("\111\118\095\102\108\121\115\104\097\100\111\119") owner["\102\108\121\102\120"]["\101\110\116\105\116\121"]:SetParent(owner["\101\110\116\105\116\121"]) owner["\102\108\121\102\120"]["\084\114\097\110\115\102\111\114\109"]:SetScale(1.5, 1.5, 1.5) owner["\102\108\121\102\120"]["\084\114\097\110\115\102\111\114\109"]:SetRotation(0x5A) if owner["\099\111\109\112\111\110\101\110\116\115"]["\100\114\111\119\110\097\098\108\101"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\100\114\111\119\110\097\098\108\101"]["\101\110\097\098\108\101\100"] = false end owner["\115\103"]:GoToState("\111\118\095\117\112\112\101\114") owner["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]["\104\117\110\103\101\114\114\097\116\101"] = 1.6 * TUNING["\087\073\076\083\079\078\095\072\085\078\071\069\082\095\082\065\084\069"] owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetExternalSpeedMultiplier(owner, "\111\108\105\118\105\097\095\115\112\101\101\100\095\109\111\100", 0x3) owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetTriggersCreep(false) owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetAllowPlatformHopping(false) owner["\068\121\110\097\109\105\099\083\104\097\100\111\119"]:SetSize(0x0, 0x0) if owner["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121"]:Close() end if owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\099\111\110\116\114\111\108\108\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\099\111\110\116\114\111\108\108\101\114"]["\097\099\116\105\111\110\098\117\116\116\111\110\111\118\101\114\114\105\100\101"] = Empty end if owner["\099\111\109\112\111\110\101\110\116\115"]["\099\097\116\099\104\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\099\097\116\099\104\101\114"]:SetEnabled(false) end if owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\097\099\116\105\111\110\112\105\099\107\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\097\099\116\105\111\110\112\105\099\107\101\114"]:PushActionFilter(FlyActionFilter, 0x14) end if owner["\099\111\109\112\111\110\101\110\116\115"]["\103\114\117\101"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\103\114\117\101"]:AddImmunity("\117\110\100\101\114\095\103\114\111\117\110\100") end if owner["\099\111\109\112\111\110\101\110\116\115"]["\102\105\114\101\098\117\103"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\102\105\114\101\098\117\103"]:Disable() end if owner["\099\111\109\112\111\110\101\110\116\115"]["\116\097\108\107\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\116\097\108\107\101\114"]:IgnoreAll("\117\110\100\101\114\095\103\114\111\117\110\100") end else ChangeToCharacterPhysics(owner) if owner["\111\118\095\102\108\121\104\112\117\112"] then owner["\111\118\095\102\108\121\104\112\117\112"]:Cancel() owner["\111\118\095\102\108\121\104\112\117\112"] = nil end if owner["\102\108\121\102\120"] then owner["\102\108\121\102\120"]:Remove() end if owner["\099\111\109\112\111\110\101\110\116\115"]["\100\114\111\119\110\097\098\108\101"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\100\114\111\119\110\097\098\108\101"]["\101\110\097\098\108\101\100"] = true end owner["\115\103"]:GoToState("\111\118\095\108\111\119\101\114") owner:DoTaskInTime(0x1, function() owner["\099\111\109\112\111\110\101\110\116\115"]["\116\097\108\107\101\114"]:Say("\229\153\169\230\162\166\239\188\140\228\187\141\229\156\168\231\187\167\231\187\173\226\128\166\226\128\166") end) owner["\099\111\109\112\111\110\101\110\116\115"]["\104\117\110\103\101\114"]["\104\117\110\103\101\114\114\097\116\101"] = 0.8 * TUNING["\087\073\076\083\079\078\095\072\085\078\071\069\082\095\082\065\084\069"] owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetExternalSpeedMultiplier(owner, "\111\108\105\118\105\097\095\115\112\101\101\100\095\109\111\100", 1.5) owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetTriggersCreep(true) owner["\099\111\109\112\111\110\101\110\116\115"]["\108\111\099\111\109\111\116\111\114"]:SetAllowPlatformHopping(true) owner["\068\121\110\097\109\105\099\083\104\097\100\111\119"]:SetSize(1.2, 0.6) if owner["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\105\110\118\101\110\116\111\114\121"]:Open() end if owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\099\111\110\116\114\111\108\108\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\099\111\110\116\114\111\108\108\101\114"]["\097\099\116\105\111\110\098\117\116\116\111\110\111\118\101\114\114\105\100\101"] = nil end if owner["\099\111\109\112\111\110\101\110\116\115"]["\099\097\116\099\104\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\099\097\116\099\104\101\114"]:SetEnabled(true) end if owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\097\099\116\105\111\110\112\105\099\107\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\112\108\097\121\101\114\097\099\116\105\111\110\112\105\099\107\101\114"]:PopActionFilter(FlyActionFilter) end if owner["\099\111\109\112\111\110\101\110\116\115"]["\103\114\117\101"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\103\114\117\101"]:RemoveImmunity("\117\110\100\101\114\095\103\114\111\117\110\100") end if owner["\099\111\109\112\111\110\101\110\116\115"]["\102\105\114\101\098\117\103"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\102\105\114\101\098\117\103"]:Enable() end if owner["\099\111\109\112\111\110\101\110\116\115"]["\116\097\108\107\101\114"] then owner["\099\111\109\112\111\110\101\110\116\115"]["\116\097\108\107\101\114"]:StopIgnoringAll("\117\110\100\101\114\095\103\114\111\117\110\100") end end end) end) owner["\079\110\076\111\097\100"] = onload owner["\079\110\078\101\119\083\112\097\119\110"] = onload end return MakePlayerCharacter("\111\108\105\118\105\097", prefabs, assets, common_postinit, master_postinit, start_inv)
